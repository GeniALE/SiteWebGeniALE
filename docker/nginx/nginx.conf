upstream website {

  server web:8000;
}

server {

  listen 80;

  location / {

    proxy_pass http://website;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $host;
    proxy_redirect off;
  }


  location /static/ {

    alias /usr/src/app/static/;
  }

  location /media/ {

    alias /usr/src/app/media/;
  }

}

# Bump client max body for large attachment upload
client_max_body_size 4M;

# Enable x-xss protection
add_header x-xss-protection "1; mode=block" always;

# Enable compression
gzip on;
gzip_vary on;
gzip_min_length 512;
gzip_proxied expired no-cache no-store private auth;
gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml;
gzip_disable "MSIE [1-6]\.";


